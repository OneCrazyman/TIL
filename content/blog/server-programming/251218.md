---
title: '[Server Programming] 시리얼버퍼 수정 후 성능 차이에 따른 프로파일링 그리고 git활용'
date: "2025-12-18"
---
### 기존 코드에 대한 의문점
서버 동작과정에서 데이터를 시리얼버퍼활용하여 다른 함수로 이동시킬때, 기존에는 동적할당을 하고, 사용 후에는 delete하는 식이였다. 

그런데 에코서버는 iocp 워커스레드로 이벤트방식의 **Recv한 데이터에 대해 컨텐츠(Echo)까지 한 스레드가** 전부 책임을 지고 있는데, 굳이 그 과정에서 동적할당 후 free하는 성능 소모를 굳이 할 필요가 없어 보였다.

그래서 스택으로 교체하고 서버 성능을 측정해보니 **워커 1개 -> 10% 성능상승 , 워커 core개 -> 성능하락** 한 결과가 나왔다..

**커밋**
https://github.com/OneCrazyman/game-server-portfolio/commit/82ccc9473338982b8cb0c2ec761e96daa793ab81

커밋 전 후에 성능 테스트할때, 깃을 활용하였다.

해당 커밋에서 새 브랜치를 판 후에 feat: 프로파일러 를 체리픽해, 성능 비교를 위한 대조군에서 프로파일링 하는 환경을 구성하여 진행해보았다.